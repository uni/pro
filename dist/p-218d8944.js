import{r as t,g as e}from"./p-446a2277.js";import{u as n}from"./p-35b900ab.js";import{i as r}from"./p-8614825d.js";function c(t,e){let{match:n,exact:c,blocked:l}=t;n||(n="");const f="r"===e[2]||"l"===e[4]?s(n):[];c||(c=" ");const p="m"===e[10]||"s"===e[7]?s(c):[],h="u"===e[0]||":"===e[9]?function(t,e){return t.map(((t,n)=>{const r=e[n]&&e[n].length>0?e[n]:[" "];let c=[],s=[];return r.some((t=>" "===t))||r.push(" "),t.forEach((t=>{r&&(r.length>1||""!==r[0])?u(r,0,t,c):(c[0]||c.push([]),c[0].push(t))})),o(r,0,c,s),function(t,e,n){let r=[];return t.forEach((t=>{if(t.every((t=>e.includes(t))))r.push({value:t[0],optional:t.length!==n});else{let e=[];t.forEach((t=>{let n=0;t.split("").forEach(((t,r,c)=>{"^"!==t&&"+"!==t&&"*"!==t||"."!==c[r-1]?(e[r-n]||(e[r-n]=[]),e[r-n].push(function(t){const e=/[a-z]/,n=/[A-Z]/,r=/[а-я]/,c=/[А-Я]/,s=/[0-9]/,u=/[0-9a-z]/,o=/\s/;return e.test(t)?e.toString():n.test(t)?n.toString():r.test(t)?r.toString():c.test(t)?c.toString():s.test(t)?s.toString():u.test(t)?u.toString():o.test(t)?o.toString():".^"===t?"/./":".+"===t?"/.+/":".*"===t?"/.*/":`/[${t}]/`}(function(){if("."!==t)return t;switch(c[r+1]){case"^":return".^";case"+":return".+";case"*":return".*";default:return t}}()))):n++}))})),r.push(function(t,e,n){return t.map((t=>{let r=[];return t.every((e=>t[0]===e))?(r=[t[0].split("/")[1],n===t.length,1],e===t.length&&".*"!==r[0]||r.push("optional")):(r=[a(t),n===t.length,1],e!==t.length&&r.push("optional")),r})).reduce((function(t,e){return 0===t.length?t.push(e):t[t.length-1][0]+t[t.length-1][1]===e[0]+e[1]?t[t.length-1][2]+=1:t[t.length++]=e,t}),[])}(e,n,t.length))}})),r}(s,r,t.length)}))}(f,p):[];l||(l="");const m="e"===e[3]||"a"===e[3]?s(l):"",b="x"===e[6]||"t"===e[8]?function(t,e){let n=[];return t.forEach(((t,r)=>{n.push([]),0===t.length&&t.push([]),t.forEach(((c,s)=>{0===s&&n[r].push({type:"match",value:[]});let u=n[r][0].value;if(Array.isArray(c))c.forEach((function(t,e,n){const r={type:"set",value:t[0],optional:"optional"===t[3]};JSON.parse(t[1])&&n[e+1]&&n[e+1][0]===t[0]?u.push(Object.assign(Object.assign({},r),{min:t[2],max:t[2]+n[e+1][2]})):n[e-1]&&t[0]===n[e-1][0]||(JSON.parse(t[1])?u.push(Object.assign(Object.assign({},r),{min:".*"===t[0]?0:".+"===t[0]?1:t[2],max:".*"===t[0]||".+"===t[0]?"Infinity":t[2]})):u.push(Object.assign(Object.assign({},r),{min:0,max:t[2]})))}));else{let t=u[u.length-1];!t||"char"!==t.type&&"string"!==t.type?u.push({type:"char",value:c.value,optional:c.optional}):(u[u.length-1].type="string",u[u.length-1].value+=c.value)}if(1===t.length&&0===t[0].length&&u.push({type:"string",value:".*"}),0===s&&e[r]){const t=e[r].filter((t=>"!"!==t&&""!==t));t.length>0&&n[r].push({type:"blocked",value:t})}}))})),n}(h,m):[],x="e"===e[5]||"o"===e[1]?function(t){let e=[];return t[1]||e.push("^"),t.forEach(((n,c)=>{t[1]&&e.push("(^"),n.forEach(((t,n,c)=>{"blocked"===t.type&&t.value.length>0&&t.value.forEach((t=>{let n=(r(t)?t.split(""):t).map((t=>"*"===t?".*":i(t))).filter((t=>""!==t)).filter((t=>t.length>0)).join("");e.push(`(?!${n}$)`)})),n+1===c.length&&(c[1]&&e.push("("),c[0].value.forEach(((t,n,r)=>{if(("set"!==t.type&&t.optional||"set"===t.type&&t.optional&&(!r[n-1]||"set"===r[n-1].type||!r[n-1].optional))&&e.push("("),"char"!==t.type&&"string"!==t.type||".*"===t.value)e.push(t.value);else{const n=t.value.split("").map((t=>i(t))).join("");e.push(n)}"set"===t.type&&(t.min===t.max?e.push(`{${t.min}}`):t.min!==t.max&&"Infinity"!==t.max&&e.push(`{${t.min},${t.max}}`)),("set"===t.type&&t.optional||"set"!==t.type&&t.optional&&(!r[n+1]||"set"!==r[n+1].type||!r[n+1].optional))&&e.push(")?")})),c[1]&&e.push(")"))})),t[1]&&e.push("$)"),c<t.length-1&&e.push("|")})),t[1]||e.push("$"),e.join("")}(b):"";return"."===e[7]||"8"===e[11]?{rule:b,regex:x}:{}}function s(t){return t.split("\n").reduce(((t,e)=>(0===t.length?t.push([e]):""!==e?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([]),t)),[])}function u(t,e,n,r){const c=t[e].split("").map((t=>i(t))).join("");n.split(new RegExp(c+"(?!\\^)(?!\\+)(?!\\*)")).forEach(((n,c)=>{const s=c+c;r[s]||r.push([]),t[e+1]?(r[s]||r.push([]),u(t,e+1,n,r[s])):(r[s]||r.push([]),r[s].push(n)),s>0&&r[s-1].push(t[e])}))}function o(t,e,n,r){n.forEach((c=>{Array.isArray(c)?t[e+1]?o(t,e+1,c,r):c.length>0&&c.some((t=>""!==t))&&r.push(c):r[r.length-1]!==n&&r.push(n)}))}function a(t){let e=t.filter(((t,e,n)=>n.indexOf(t)===e)).map((t=>t.split("/")[1])).join("");return e.includes(".")?".":`[${e.split("][").map((t=>t.replace("[","").replace("]",""))).sort().join("")}]`}function i(t){switch(t){case"\\":return"\\\\";case"*":return"\\*";case".":return"\\.";case"+":return"\\+";case"(":return"\\(";case")":return"\\)";case"[":return"\\[";case"]":return"\\]";case"{":return"\\{";case"}":return"\\}";case"^":return"\\^";case"$":return"\\$";case"?":return"\\?";case"|":return"\\|";default:return t}}const l=class{constructor(e){t(this,e),this.inactive=!1,this.activate=!1,this.all=!1}componentDidRender(){const{el:t,match:e,exact:r,blocked:s,prop:u,all:o,selector:a}=this,i=window.top.location.host;(i.includes("uiregex")||i.includes("localhost"))&&setTimeout((()=>{if(!this.inactive||this.activate){const{rule:l,regex:f}=c({match:e,exact:r,blocked:s},i);n(t,u,{rule:l,regex:f},o,a),this.activate=!1}}))}get el(){return e(this)}};export{l as U,c as g}